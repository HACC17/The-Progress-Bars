<!-- Give ability to style output of pdf and render highcharts -->
<script src="https://code.jquery.com/jquery-2.2.2.min.js" integrity="sha256-36cp2Co+/62rEAAYHLmRCPIych47CvdM+uTBJwSzWjI=" crossorigin="anonymous"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<%= wicked_pdf_stylesheet_link_tag "pdf" -%>

<div id="pdf">
	<h2>Executive Summary of OHA Grant Allocation as of <%= Time.now.strftime("%m/%d/%Y") %></h2>
	<div id="row">
		<div class="rollup-card rt-border bt-border">
			<p>
				$<%= number_to_human(@award_amount, precision:3) %><br/>
				<span>Total Awarded</span>
			</p>
		</div>
		<div class="rollup-card rt-border bt-border">
			<p>
				<%= @grant_count %><br/>
				<span>Total Projects</span>
			</p>	
		</div>
		<div class="rollup-card bt-border">
			<p>
				<%= @grant_count - @inProgress %><br/>
				<span>Grants Funded</span>
			</p>
		</div>
	</div>
	<div id="row" class="padding">
		<div class="rollup-card rt-border">
			<p>
				<%= number_with_delimiter(@served[0].first) %><br/>
				<span>Native Hawaiins Served</span>
			</p>	
		</div>
		<div class="rollup-card rt-border">
			<p>
				<%= number_with_delimiter(@served[0].second) %><br/>
				<span>Total Served</span>
			</p>
		</div>
		<div class="rollup-card">
			<p>
				<%= @inProgress %><br/>
				<span>Grants In-Progress</span>
			</p>
		</div>
	</div>
	<div id="top-chart">
		<div id="container1"></div> 
	</div>
	<div id="bottom-chart">
		<div id="container2"></div> 
	</div>
</div>


<script>
Highcharts.chart('container1', {
    chart: {
        type: 'area'
    },
    title: {
        text: 'Historic Worldwide Population Distribution by Region'
    },
    subtitle: {
        text: 'Source: Wikipedia.org'
    },
    xAxis: {
        categories: ['1750', '1800', '1850', '1900', '1950', '1999', '2050'],
        tickmarkPlacement: 'on',
        title: {
            enabled: false
        }
    },
    yAxis: {
        title: {
            text: 'Percent'
        }
    },
    tooltip: {
        pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.percentage:.1f}%</b> ({point.y:,.0f} millions)<br/>',
        split: true
    },
    plotOptions: {
        area: {
            stacking: 'percent',
            lineColor: '#ffffff',
            lineWidth: 1,
            marker: {
                lineWidth: 1,
                lineColor: '#ffffff'
            }
        }
    },
    series: [{
        name: 'Asia',
        data: [502, 635, 809, 947, 1402, 3634, 5268]
    }, {
        name: 'Africa',
        data: [106, 107, 111, 133, 221, 767, 1766]
    }, {
        name: 'Europe',
        data: [163, 203, 276, 408, 547, 729, 628]
    }, {
        name: 'America',
        data: [18, 31, 54, 156, 339, 818, 1201]
    }, {
        name: 'Oceania',
        data: [2, 2, 2, 6, 13, 30, 46]
    }]	
});

Highcharts.chart('container2', {
    chart: {
        type: 'area'
    },
    title: {
        text: 'Historic Worldwide Population Distribution by Region'
    },
    subtitle: {
        text: 'Source: Wikipedia.org'
    },
    xAxis: {
        categories: ['1750', '1800', '1850', '1900', '1950', '1999', '2050'],
        tickmarkPlacement: 'on',
        title: {
            enabled: false
        }
    },
    yAxis: {
        title: {
            text: 'Percent'
        }
    },
    tooltip: {
        pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.percentage:.1f}%</b> ({point.y:,.0f} millions)<br/>',
        split: true
    },
    plotOptions: {
        area: {
            stacking: 'percent',
            lineColor: '#ffffff',
            lineWidth: 1,
            marker: {
                lineWidth: 1,
                lineColor: '#ffffff'
            }
        }
    },
    series: [{
        name: 'Asia',
        data: [502, 635, 809, 947, 1402, 3634, 5268]
    }, {
        name: 'Africa',
        data: [106, 107, 111, 133, 221, 767, 1766]
    }, {
        name: 'Europe',
        data: [163, 203, 276, 408, 547, 729, 628]
    }, {
        name: 'America',
        data: [18, 31, 54, 156, 339, 818, 1201]
    }, {
        name: 'Oceania',
        data: [2, 2, 2, 6, 13, 30, 46]
    }]	
});
</script>